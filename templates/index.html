{% extends "base.html" %}
{% block title %}Expense Tracker{% endblock %}

{% block content %}
    <h1>ðŸ’¸ Expense Tracker</h1>

    <div class="card totals">
        <div class="pill">Income: <b class="income">{{ "%.2f"|format(total_income)}}</b></div>
        <div class="pill">Expense: <b class="expense">{{ "%.2f"|format(total_expense)}}</b></div>
        <div class="pill">Balance: <b>{{ "%.2f"|format(balance)}}</b></div>
    </div>

    <div class="card">
        <h2>Add Transaction</h2>
        <form method="POST" action="/add" class="row">
            <select name="type" require>
                <option value="income">Income</option>
                <option value="expense">Expense</option>
            </select>

            <input name="description" placeholder="Description (e.g., Salary, Milk)" required/>
            <input name="amount" placeholder="Amount (e.g., 250)" type="number" step="0.01" required/>
            <button type="submit">Add</button>
        </form>
    </div>

    <div class="card">
        <h2>Transactions</h2>
        <table>
            <thead>
                <tr>
                    <th>Type</th>
                    <th>Description</th>
                    <th>Amount</th>
                    <th>Date</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                {% for t in transaction %}
                <tr>
                    <td class="{{ t.type}}">{{t.type}}</td>
                    <td>{{t.description}}</td>
                    <td>{{ "%.2f"|format(t.amount)}}</td>
                    <td>{{t.created_at}}</td>
                    <td>
                        <form method="POST" action="/delete/{{ t.id }}">
                            <button type="submit">Delete</button>
                        </form>
                    </td>
                </tr>
                {% else %}
                <tr><td colspan="5">No transaction yet.</td></tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% endblock %}